---
title: Linux命令
date: 2020-11-15 20:27:05
tags: Linux
categories: Linux
---

{% centerquote %} ^ _ ^ {% endcenterquote %}
<!-- more -->

# 文件管理

## 文件基本属性

**属性组成**

| 文件类型 | 文件权限 | 所属组权限 | 其他用户权限 | 

### 基本文件类型
- d：目录
- -：普通文件
- l：链接文件
- b：block，块设备
- c：char，字符型设备

### 基本操作

**更改文件属组**
```
chgrp [-R] 属组名 文件名
```

```
chown [-R] 属组名 文件名
```

**更改文件属性**
```
chmod [-R] xyz 文件或目录
# xyz是数字，r-4,w-2,x-1
```

## 普通文件和目录文件管理

### 创建目录

**创建目录 mkdir**

|常用选项|含义|
|---|---|
| -m | 配置目录权限 |
| -p | 递归创建目录 |

### 创建文件

**创建文件 touch**

### 删除目录和文件

**删除空目录 rmdir**

|常用选项|含义|
|---|---|
| -p | 递归删除目录 |

**删除非空目录和文件 rm**

|常用选项|含义|
|---|---|
| -p | 递归删除目录 |
| -i | 删除文件前进行询问 |
| -f | 与 -i 相对，删除前不进行询问直接删除 |


### 查看目录

**列出目录 ls**

|常用选项|含义|
|---|---|
| -a | 全部文件 |
| -l | 长数据串列出 |

**显示当前目录 pwd**

|常用选项|含义|
|---|---|
| -p | 如果是链接的话，显示真实地址 |


### 查看文件

**1.全文显示 cat**

**2.全文行倒序显示 tac**

**3.全文显示（附行号） nl**

**4.按页显示（可向后翻动） more**

**5.按页显示（可前后翻动） less**

**6.显示头几行 head**

**7.显示尾几行 tail**

### 修改目录和文件

**复制目录和文件 cp**

|常用选项|含义|
|---|---|
| -p | 连同文件属性一起复制 |
| -r | 递归复制 |
| -i | 目标档已存在时，询问用户意愿 |
| -f | 与 -i 相对：目标档已存在时，不询问用户直接覆盖已有目标档 |
| -d | 若来源档为 link file，则复制链接而不是文档本身 |
| -l | 进行硬链接创建，而非复制文件本身 |
| -s | 复制称为符号链接档 |


**移动目录和文件（或修改名称） mv**

|常用选项|含义|
|---|---|
| -i | 目标文件已存在时，询问用户下一步操作 |
| -f | 与 -i 相对：目标文件已存在时，不询问用户而是直接覆盖 |


# Vim

Vim的三种模式：
- 命令模式：一般用于移动光标、删除复制数据
- 插入模式：编写文档时的模式
- 指令行模式：输入命令会在底部栏显示，编写时通常先输入一个：

## 移动光标

| 键 | 功能 |
| --- | --- |
| 上下左右箭头 | 光标上下左右移动 |
| h | 左 |
| j | 下 |
| k | 右 |
| l | 上 |
| + | 移动到非空格符的下一行 |
| - | 移动到非空格符的上一行 |
| n \<space\> | n为具体数字，\<space\>为空格；光标向右移动n个字符 |
| 0 | 移动到行首 |
| $ | 移动到行尾 |
| H | 移动到屏幕最上方一行的首字母 |
| M | 移动到屏幕中央一行的首字母 |
| L | 移动到屏幕最下方一行的首字母 |
| G | 移动都文档最后一行 |
| nG | n为具体数字；移动到文档的第一行 |
| gg | 移动到文档的第一行 |
| n \<Enter\> | n为具体数字；向下移动n行 |


## 文档修改

| 键 | 功能 |
| --- | --- |
| x | 向后删除一个字符 |
| nx | 向后删除n个字符 |
| dd | 删除光标所在行 |
| ndd | 删除光标所在的向下n行 |
| d1G | 删除光标所在到第一行之间的所有数据 |
| dG | 删除光标所在到最后一行的所有数据 |
| d$ | 删除光标所在到该行最后一个字符 |
| d0 | 删除光标所在到该行的第一个字符 |
| yy | 复制光标所在行 |
| nyy | 复制光标向下n行 |
| y1G | 复制光标所在到第一行之间的所有数据 |
| yG | 复制光标所在到最后一行的所有数据 |
| y$ | 复制光标所在到该行最后一个字符 |
| y0 | 复制光标所在到该行的第一个字符 |
| p | 将剪贴板的数据粘贴到光标所在下一行 |
| J | 将光标所在行与下一行数据结合成同一行 |
| u | 复原前一个动作 |
| \[Ctrl\] + r | 重复上一个动作 |

## 搜索
| 键 | 功能 |
| --- | --- |
| /word | 向下查找word |
| ?word | 向上查找word |
| n | 继续向下查找 |
| N | 继续向上查找 |

## 输入

| 命令 | 功能 |
| --- | --- |
| i | 从光标处开始插入 |
| I | 从目前行的第一个非空格符处开始插入 |
| a | 从光标的下一个字符开始输入 |
| A | 从光标所在行最后一个字符处开始输入 |
| o | 从光标所在的下一行输入新的一行 |
| O | 从光标所在行的上一行输入新的一行 |
| r | 进入取代模式，取代一个字符 |
| R | 进入取代模式，一直取代，直到输入Esc键 |


## 指令行模式命令

| 指令 | 功能 |
| --- | --- |
| :w | 保存 |
| :q | 退出 |
| :wq! | 保存并退出（强制） |
| :w filename | 将编辑后的数据存储为另一个文档 |
| :r filename | 将另一个文档的数据读入本文档 |
| :n1,n2 w filename | 将n1到n2行存储为另一个文档 |
| :! command | command是系统命令，比如 ls /home |
| :set nu | 显示行号 |
| :set nonu | 不显示行号 |


# 账号管理及账号组管理

**相关文件**
- 保存账号信息的文件：/etc/passwd
- 保存账号组信息的文件：/etc/group
- 保存账号密码的文件：/etc/shadow


## 添加账号

```
useradd [选项] 用户名
```

| 选项 | 功能 |
| --- | --- |
| -c | 添加注释性描述 |
| -d | 指定用户主目录 |
| -m | 用户主目录不存在则自动创建 |
| -s | 指定用户登录Shell |
| -g | 指令用户所属用户组 |
| -u | 指定用户号 |

## 切换账号

1. 切换到普通用户
```
su username
```

2. 切换到root用户
```
sudo su
```

## 删除用户账号

```
userdel [选项] 用户名
```

| 选项 | 功能 |
| --- | --- |
| -r | 把用户主目录一起删除 |

## 修改账号

```
usermod [选项] 用户名
```

选项与useradd中的一致

## 用户口令

```
passwd [选项] 用户名
```

| 选项 | 功能 |
| --- | --- |
| -l | 锁定口令，禁用账号 |
| -u | 口令解锁 |
| -d | 使账号无口令，仍是一种禁用手段 |
| -f | 强迫用户下次登录时修改口令 |


## 添加用户组

```
groupadd [选项] 用户组
```

| 选项 | 功能 |
| --- | --- |
| -g | 指令用户组的组标识号 |
| -o | 与 -g 同时使用，表示新用户组的GID与系统已有用户组的GID相同 |

## 删除用户组

```
groupdel [选项] 用户组
```

## 修改用户组

```
groupmod [选项] 用户组
```

| 选项 | 功能 |
| --- | --- |
| -g | 指令用户组的组标识号 |
| -o | 与 -g 同时使用，表示新用户组的GID与系统已有用户组的GID相同 |
| -n | 将用户组的名字改为新名字 |

## 切换组

```
newgrp root
```

# 磁盘管理

## 文件系统

```
df [选项]
```

| 选项 | 功能 |
| --- | --- |
| -a | 列出所有文件系统 |
| -k | 以 KB 的形式显示容量 |
| -m | 以 MB 的形式显示容量 |
| -h | 以人们容易阅读的格式（KB,MB,GB）自行显示 |
| -H | 以 M = 1000K 代替 M = 1024K 显示 |
| -T | 显示文件系统类型 |
| -i | 不用硬盘容量，而以inode的数量来显示 |


## 磁盘空间

**磁盘空间查看**

```
du [选项]
```

| 选项 | 功能 |
| --- | --- |
| -a | 列出所有文件和目录容量，默认时仅统计目录底下的文件量 |
| -k | 以 KB 的形式显示容量 |
| -m | 以 MB 的形式显示容量 |
| -h | 以人们容易阅读的容量格式显示 |
| -s | 只列出总容量 |
| -S | 不包括子目录下的总计|


**磁盘挂载**
```
mount 装置文件名 挂载点
```

**磁盘卸载**
```
unmount 装置名称或挂载点
```

# 线程管理

**查看当前运行的进程**

```
ps [选项]
```

| 选项 | 功能 |
| --- | --- |
| -a | 显示当前终端运行的所有进程信息 |
| -u | 以用户信息显示进程 |
| -x | 显示后台运行进程的参数 |

**查看父进程**

```
ps -ef
```

**查看进程树**

```
pstree [选项]
```

| 选项 | 功能 |
| --- | --- |
| -p | 显示父id |
| -u | 显示用户组 |


**结束进程**

```
kill -9 进程id
```

# 系统信息

1. 查看处理器版本
```
uname -p
```

2. 查看内核版本
```
uname -r
```

3. 查看主机名
```
uname -n
hostname
```

4. 查看语言字符集
```
echo $LANG
```

5. 查看服务器开机时长
```
uptime
```

6. 查看CPU信息
```
grep 'model name' /proc/cpuinfo|awk -F: '{print $2}'|uniq
```

7. 查看CPU位数
```
getconf LONG_BIT
```

8. 查看内存信息
```
sed -n '/MemTotal\|MemFree/p' /proc/meminfo
```

9. 查看交换区
```
sed -n '/SwapTotal\|SwapFree/p' /proc/meminfo
```

10. 查看服务器IP地址
```
ifconfig|grep 'inet'|grep -v '127.0.0.1'|awk '{print $2}'
```

11. 查看防火墙开启的端口
```
firewall-cmd --list-ports
```

12. 查看linux网关
```
route | grep default
```

13. 查看linux端口
```
netstat -lntp # 查看所有监听端口
netstat -antp # 查看所有建立的TCP连接
```

14. 查看服务器DNS配置
```
cat /etc/resolv.conf
```

15. 查看防火墙规则
```
iptables -L
```

16. 查看路由表
```
route -n
```

17. 查看网络统计信息
```
netstat -s
```

